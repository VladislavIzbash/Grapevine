syntax = "proto3";

option java_multiple_files = true;
option java_package = "ru.vizbash.grapevine.network.messages.routed";

message RoutedMessage {
  uint64 msg_id = 1;
  uint64 src_id = 2;
  uint64 dest_id = 3;
  oneof payload {
    StatusResponse response = 4;
    TextMessage text = 5;
  }
  bytes sign = 14;
}

enum Error {
  BAD_SIGNATURE = 0;
}

message StatusResponse {
  uint64 request_id = 1;
  bool ok = 2;
  Error error = 3;
}

message TextMessage {
  string text = 1;
}

